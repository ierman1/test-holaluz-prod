(function(){"use strict";var n={7345:function(n,t,e){var i=e(9242),r=e(3396);function o(n,t,e,i,o,s){const l=(0,r.up)("SearchBar"),u=(0,r.up)("CupsInfo");return(0,r.wg)(),(0,r.iD)("main",null,[(0,r.Wm)(l,{onUpdatingSearchTerm:t[0]||(t[0]=n=>o.searchTerm=n)}),(0,r.Wm)(u,{searchTerm:o.searchTerm},null,8,["searchTerm"])])}const s={class:"search-bar-container"},l=(0,r._)("label",null,"Find CUPS",-1),u={class:"input-container"};function c(n,t,e,o,c,p){return(0,r.wg)(),(0,r.iD)("div",s,[l,(0,r._)("div",u,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>c.searchTerm=n),onChange:t[1]||(t[1]=(...n)=>p.updateSearchTerm&&p.updateSearchTerm(...n))},null,544),[[i.nr,c.searchTerm]]),(0,r._)("button",{onClick:t[2]||(t[2]=(...n)=>p.updateSearchTerm&&p.updateSearchTerm(...n))},"Search")])])}var p={name:"SearchBar",data(){return{searchTerm:""}},methods:{updateSearchTerm(){this.$emit("updatingSearchTerm",this.searchTerm)}}},a=e(89);const h=(0,a.Z)(p,[["render",c]]);var f=h,d=e(7139);const y={class:"cups-info-container"},m={key:0,class:"cups-info-blocks"},v={key:1,class:"potential"},g={key:2,class:"potential"},w={key:3,class:"offer-type"},b={key:4,class:"error"};function P(n,t,e,i,o,s){const l=(0,r.up)("ClientInfo"),u=(0,r.up)("SupplyPointInfo");return(0,r.wg)(),(0,r.iD)("div",y,[o.client&&o.supplyPoint?((0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(l,{client:o.client},null,8,["client"]),(0,r.Wm)(u,{supplyPoint:o.supplyPoint},null,8,["supplyPoint"])])):(0,r.kq)("",!0),s.potential?((0,r.wg)(),(0,r.iD)("p",v,"Potential client")):(0,r.kq)("",!0),o.client&&!s.potential?((0,r.wg)(),(0,r.iD)("p",g,"Non potential client")):(0,r.kq)("",!0),s.offerType?((0,r.wg)(),(0,r.iD)("p",w,(0,d.zw)(s.offerType),1)):(0,r.kq)("",!0),o.error?((0,r.wg)(),(0,r.iD)("p",b,"CUPS not found.")):(0,r.kq)("",!0)])}const k={key:0,class:"info-container"},T={class:"title"},_=(0,r._)("hr",null,null,-1),S=(0,r._)("span",{class:"title"},"Address: ",-1),O=(0,r._)("span",{class:"title"},"Role: ",-1),j=(0,r._)("span",{class:"title"},"Building type: ",-1);function I(n,t,e,i,o,s){return e.client?((0,r.wg)(),(0,r.iD)("div",k,[(0,r._)("p",T,(0,d.zw)(e.client.fullName),1),_,(0,r._)("p",null,[S,(0,r.Uk)((0,d.zw)(e.client.address),1)]),(0,r._)("p",null,[O,(0,r.Uk)((0,d.zw)(e.client.role),1)]),(0,r._)("p",null,[j,(0,r.Uk)((0,d.zw)(e.client.buildingType),1)])])):(0,r.kq)("",!0)}var C={name:"ClientInfo",props:["client"]};const z=(0,a.Z)(C,[["render",I]]);var D=z;const U={key:0,class:"info-container"},q=(0,r._)("p",{class:"title"},"Supply point",-1),N=(0,r._)("hr",null,null,-1),x=(0,r._)("span",{class:"title"},"Tariff: ",-1),A=(0,r._)("span",{class:"title"},"Invoiced amount: ",-1),B=(0,r._)("span",{class:"title"},"Power: ",-1);function Z(n,t,e,i,o,s){return e.supplyPoint?((0,r.wg)(),(0,r.iD)("div",U,[q,N,(0,r._)("p",null,[x,(0,r.Uk)((0,d.zw)(e.supplyPoint.tariff),1)]),(0,r._)("p",null,[A,(0,r.Uk)((0,d.zw)(e.supplyPoint.invoicedAmount),1)]),(0,r._)("p",null,[B,(0,r.Uk)((0,d.zw)(e.supplyPoint.power.p1)+" / "+(0,d.zw)(e.supplyPoint.power.p2),1)])])):(0,r.kq)("",!0)}var W={name:"SupplyPointInfo",props:["supplyPoint"]};const F=(0,a.Z)(W,[["render",Z]]);var E=F;const M="./static/clients.json";function R(n,t,e,i){this.fullName=n,this.address=t,this.role=e,this.buildingType=i}R.fromObject=n=>n?new R(n.full_name,n.address,n.role,n.building_type):null,R.fetch=()=>fetch(M).then((n=>n.json()));var V=R;e(7658);const $="./static/supply-points.json";function G(n,t,e,i){this.tariff=n,this.invoicedAmount=parseFloat(t),this.power=e,this.neighborIds=i,this.neighbors=[]}G.prototype.fetchNeighbors=function(){this.neighborIds.forEach((n=>{G.fetch().then((t=>{const e=t.find((t=>t.cups===n));this.neighbors.push(G.fromObject(e))}))}))},G.fromObject=n=>n?new G(n.tariff,n.invoiced_amount,n.power,n.neighbors):null,G.fetch=()=>fetch($).then((n=>n.json()));var H=G,J={name:"CupsInfo",components:{SupplyPointInfo:E,ClientInfo:D},props:["searchTerm"],data(){return{client:null,supplyPoint:null,error:!1}},computed:{potential(){return this.client&&this.supplyPoint?"house"==this.client.buildingType&&this.supplyPoint.neighborIds.length>=1:null},offerType(){if(this.potential){let n=0;return this.supplyPoint.neighbors.map((t=>n+=t.invoicedAmount)),n>100?"Special discount: 12% discount.":this.supplyPoint.neighbors.filter((n=>n.power.p1<this.supplyPoint.power.p1&&n.power.p2<this.supplyPoint.power.p2)).length==this.supplyPoint.neighbors.length?"Basic discount: 5% discount.":"Standard offer: No discount."}return null}},watch:{searchTerm:function(n){this.error=!1,V.fetch().then((t=>{const e=t.find((t=>t.cups===n));this.client=V.fromObject(e),this.error=null==this.client})),H.fetch().then((t=>{const e=t.find((t=>t.cups===n));this.supplyPoint=H.fromObject(e),null!=this.supplyPoint&&this.supplyPoint.fetchNeighbors(),this.error=null==this.supplyPoint}))}}};const K=(0,a.Z)(J,[["render",P]]);var L=K,Q={name:"App",components:{CupsInfo:L,SearchBar:f},data(){return{searchTerm:""}}};const X=(0,a.Z)(Q,[["render",o]]);var Y=X;(0,i.ri)(Y).mount("#app")}},t={};function e(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return n[i](o,o.exports,e),o.exports}e.m=n,function(){var n=[];e.O=function(t,i,r,o){if(!i){var s=1/0;for(p=0;p<n.length;p++){i=n[p][0],r=n[p][1],o=n[p][2];for(var l=!0,u=0;u<i.length;u++)(!1&o||s>=o)&&Object.keys(e.O).every((function(n){return e.O[n](i[u])}))?i.splice(u--,1):(l=!1,o<s&&(s=o));if(l){n.splice(p--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=n.length;p>0&&n[p-1][2]>o;p--)n[p]=n[p-1];n[p]=[i,r,o]}}(),function(){e.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return e.d(t,{a:t}),t}}(),function(){e.d=function(n,t){for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)}}(),function(){var n={143:0};e.O.j=function(t){return 0===n[t]};var t=function(t,i){var r,o,s=i[0],l=i[1],u=i[2],c=0;if(s.some((function(t){return 0!==n[t]}))){for(r in l)e.o(l,r)&&(e.m[r]=l[r]);if(u)var p=u(e)}for(t&&t(i);c<s.length;c++)o=s[c],e.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return e.O(p)},i=self["webpackChunktest_holaluz"]=self["webpackChunktest_holaluz"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(7345)}));i=e.O(i)})();
//# sourceMappingURL=app.81998a67.js.map